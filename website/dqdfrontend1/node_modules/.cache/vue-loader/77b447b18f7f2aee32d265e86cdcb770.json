{"remainingRequest":"F:\\FinalProject\\website\\dqdfrontend1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\FinalProject\\website\\dqdfrontend1\\src\\pages\\publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\FinalProject\\website\\dqdfrontend1\\src\\pages\\publish.vue","mtime":1616833363883},{"path":"F:\\FinalProject\\website\\dqdfrontend1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616816888650},{"path":"F:\\FinalProject\\website\\dqdfrontend1\\node_modules\\babel-loader\\lib\\index.js","mtime":1616816894684},{"path":"F:\\FinalProject\\website\\dqdfrontend1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616816888650},{"path":"F:\\FinalProject\\website\\dqdfrontend1\\node_modules\\vue-loader\\lib\\index.js","mtime":1616816893834}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default{\n\tname:'publish',\n\tdata(){\n\t\treturn{\n\t\t\twhat:\"vm_main1\",\n\t\t\tusername:\"\",\n\t\t\tuseridentity:\"\",\n\t\t\ttoken:\"\",\n\t\t\tmodulars:null,\n\t\t\tchoose_modular_radio:null,\n\t\t\ttitle:null,\n\t\t\tcontent:null,\n\t\t\tcover:null,\n\t\t\tobject:null\n\t\t}\n\t},\n\tmethods:{\n\t\tpublish_time:function(){\n\t\t\tDate.prototype.Format = function (fmt) { //author: meizz\n\t\t\t    var o = {\n\t\t\t        \"M+\": this.getMonth() + 1, //月份 \n\t\t\t        \"d+\": this.getDate(), //日 \n\t\t\t        \"H+\": this.getHours(), //小时 \n\t\t\t        \"h+\": this.getHours(), //小时 \n\t\t\t        \"m+\": this.getMinutes(), //分 \n\t\t\t        \"s+\": this.getSeconds(), //秒 \n\t\t\t        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度 \n\t\t\t        \"S\": this.getMilliseconds() //毫秒 \n\t\t\t    };\n\t\t\t    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\t\t\t    for (var k in o)\n\t\t\t    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n\t\t\t    return fmt;\n\t\t\t}\n\t\t\treturn (new Date()).Format(\"yyyy-MM-dd hh:mm:ss\");\n\t\t},\n\t\tpreview:function(){\n\t\t\tthis.content = editor.txt.html()\n\t\t\tconsole.log(this.content);\n\t\t\tif(!this.title)\n\t\t\t{\n\t\t\t\talert(\"请先输入标题阿!\"+(new Date()).Format(\"yyyy-MM-dd hh:mm:ss\"));\n\t\t\t\tconsole.log();\n\t\t\t}\n\t\t\telse if(!this.choose_modular_radio)\n\t\t\t{\n\t\t\t\talert(\"请先选择版块!\")\n\t\t\t}\n\t\t\telse if(!this.content)\n\t\t\t{\n\t\t\t\talert(\"请先输入内容!\")\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.$cookies.set(\"forum_id\",this.choose_modular_radio);\n\t\t\t\tthis.$cookies.set('title',this.title);\n\t\t\t\tthis.$cookies.set('publish_time',this.publish_time());\n\t\t\t\t/* this.$cookies.set('content',this.content); cookie存的东西少，不能用*/\n\t\t\t\twindow.localStorage.setItem(\"content\",this.content);\n\t\t\twindow.open(\"newsmodel.html\");\n\t\t\t}\n\t\t},\n\t\tquery_modulars:function(){\n\t\t\tvar that = this;\n\t\t\taxios.get(\"https://www.122yici.xin/sjz/admin/forum/getmine\",\n\t\t\t{\n\t\t\t\theaders : {\n\t\t\t\t\"Authorization\" : \"Bearer \"+that.token\t\n\t\t\t\t},\n\t\t\t}\n\t\t\t).then(function(response){\n\t\t\t\tthat.modulars = response.data;\n\t\t\t\tconsole.log(response.data);\n\t\t\t}).catch(function(error)\n\t\t\t{\n\t\t\t\tconsole.log(error);\n\t\t\t\talert(\"获取当前用户的管理版块，未知错误，请联系管理员!\");\n\t\t\t});\n\t\t},\n\t\tcancel_btn:function(){\n\t\t\tif(confirm(\"取消将清空编辑器内容并无法恢复?\"))\n\t\t\t{\t\n\t\t\t\t\teditor.txt.html(\"\");\n\t\t\t}\t\n\t\t},\n\t\tpublish_btn:function(){\n\t\t\tvar that = this;/* \n\t\t\ttitle_rule = /^ +$/; */\n\t\t\tthis.content = editor.txt.html();\n\t\t\tif(!this.title)\n\t\t\t{\n\t\t\t\talert(\"请先输入标题!\");\n\t\t\t}\n\t\t\telse if(!this.content)\n\t\t\t{\n\t\t\t\talert(\"请先输入内容!\")\n\t\t\t}\n\t\t\telse if(!this.object)\n\t\t\t{\n\t\t\t\talert(\"请选择板块\")\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(confirm(\"确认发布?\"))\n\t\t\t\t{\n\t\t\t\t\tconsole.log(this.content)\n\t\t\t\t\taxios.post(\"http://8.129.27.254:8000/publish\",window.Qs.stringify({\n\t\t\t\t\t\tforum_id : that.choose_modular_radio,\n\t\t\t\t\t\tnew_title : that.title,\n\t\t\t\t\t\tnew_content : that.content.toString(),\n\t\t\t\t\t\tcover:that.cover,\n\t\t\t\t\t\tobject:that.object\n\t\t\t\t\t}),\n\t\t\t\t\t{\n\t\t\t\t\t\theaders:{\n\t\t\t\t\t\t\t\"Authorization\" : \"Bearer \"+that.token\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t).then(function(response){\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\tif(response.data==\"success\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\talert(\"发布新闻成功!\");\n\t\t\t\t\t        editor.txt.html(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(function(error){\n\t\t\t\t\t\tconsole.log(\"发布新闻失败,请联系管理员!\");\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n}\n",{"version":3,"sources":["publish.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"publish.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div style=\"width: 100%;height: 80%;\">\r\n\t\t<div id=\"editor\" style=\"width:80%;display: inline-block;\">\r\n\t\t</div>\r\n\t\t<div style=\"width: 20%;display: inline-block;text-align: center;position: absolute;overflow-y: scroll;height: 600px;\">\r\n\t\t\t<form name=theform>\r\n\t\t\t\t<input style=\"display: none;\" type=\"radio\" name=\"myradio\" value=\"random_name\" checked=\"true\"/>\r\n\t\t\t\t<br/>\r\n\t\t\t</form>\r\n\t\r\n\t\t\t<h4>您所选择的文件列表：</h4>\r\n\t\t\t<div id=\"ossfile\">你的浏览器不支持flash,Silverlight或者HTML5！</div>\r\n\t\t\t<br/>\r\n\t\t\t<div id=\"container\">\r\n\t\t\t\t<a id=\"selectfiles\" href=\"javascript:void(0);\" class='btn'>选择文件</a>\r\n\t\t\t\t<a id=\"postfiles\" href=\"javascript:void(0);\" class='btn'>开始上传</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div id=\"main\" style=\"margin-top: 20px;\">\r\n\t\t<el-row style=\"margin-bottom: 20px;\">\r\n\t\t\t<el-col>\r\n\t\t\t\t<el-radio v-for=\"(item,index) in modulars\" v-model=\"choose_modular_radio\" :label=\"item.FORUM_ID\" :key=\"index\">{{item.FORUM_NAME}}</el-radio>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t<el-row>\r\n\t\t\t<el-col :span=\"10\" :offset=\"1\">\r\n\t\t\t\t标题<el-input type=\"text\" v-model=\"title\" style=\"width: 80%;\"></el-input>\r\n\t\t\t</el-col>\r\n\t\t\t<el-col :span=\"10\" :offset=\"1\">\r\n\t\t\t\t封面<el-input type=\"text\" v-model=\"cover\" style=\"width: 80%;\"></el-input>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t<el-row>\r\n\t\t\t<el-col :span=\"10\" :offset=\"1\">\r\n\t\t\t\t板块<el-input type=\"text\" v-model=\"object\" style=\"width: 80%;\"></el-input>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t\r\n\t\t<el-row style=\"margin-top: 30px;\">\r\n\t\t\t<el-col :span=\"24\" style=\"text-align: center;\">\r\n\t\t\t\t<el-button-group>\r\n\t\t\t\t\t<el-button @click=\"cancel_btn\">取消</el-button>\r\n\t\t\t\t\t<el-button style=\"margin-left: 20px;\" type=\"primary\" @click=\"publish_btn\">发布</el-button>\r\n\t\t\t\t</el-button-group>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t<pre id=\"console\"></pre>\r\n\t</div>\r\n\t\t\r\n\t\r\n\t<script type=\"text/javascript\" src=\"lib/crypto1/crypto/crypto.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"lib/crypto1/hmac/hmac.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"lib/crypto1/sha1/sha1.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"lib/base64.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"lib/plupload-2.1.2/js/plupload.full.min.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"upload.js\"></script>\r\n\t<script type=\"text/javascript\" src=\"js/clipboard.min.js\"></script>\n</template>\n<script src=\"js/wangEditor.min.js\"></script>\n<script>\r\n\texport default{\r\n\t\tname:'publish',\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\twhat:\"vm_main1\",\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tuseridentity:\"\",\r\n\t\t\t\ttoken:\"\",\r\n\t\t\t\tmodulars:null,\r\n\t\t\t\tchoose_modular_radio:null,\r\n\t\t\t\ttitle:null,\r\n\t\t\t\tcontent:null,\r\n\t\t\t\tcover:null,\r\n\t\t\t\tobject:null\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tpublish_time:function(){\r\n\t\t\t\tDate.prototype.Format = function (fmt) { //author: meizz\r\n\t\t\t\t    var o = {\r\n\t\t\t\t        \"M+\": this.getMonth() + 1, //月份 \r\n\t\t\t\t        \"d+\": this.getDate(), //日 \r\n\t\t\t\t        \"H+\": this.getHours(), //小时 \r\n\t\t\t\t        \"h+\": this.getHours(), //小时 \r\n\t\t\t\t        \"m+\": this.getMinutes(), //分 \r\n\t\t\t\t        \"s+\": this.getSeconds(), //秒 \r\n\t\t\t\t        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度 \r\n\t\t\t\t        \"S\": this.getMilliseconds() //毫秒 \r\n\t\t\t\t    };\r\n\t\t\t\t    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n\t\t\t\t    for (var k in o)\r\n\t\t\t\t    if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n\t\t\t\t    return fmt;\r\n\t\t\t\t}\r\n\t\t\t\treturn (new Date()).Format(\"yyyy-MM-dd hh:mm:ss\");\r\n\t\t\t},\r\n\t\t\tpreview:function(){\r\n\t\t\t\tthis.content = editor.txt.html()\r\n\t\t\t\tconsole.log(this.content);\r\n\t\t\t\tif(!this.title)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请先输入标题阿!\"+(new Date()).Format(\"yyyy-MM-dd hh:mm:ss\"));\r\n\t\t\t\t\tconsole.log();\r\n\t\t\t\t}\r\n\t\t\t\telse if(!this.choose_modular_radio)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请先选择版块!\")\r\n\t\t\t\t}\r\n\t\t\t\telse if(!this.content)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请先输入内容!\")\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthis.$cookies.set(\"forum_id\",this.choose_modular_radio);\r\n\t\t\t\t\tthis.$cookies.set('title',this.title);\r\n\t\t\t\t\tthis.$cookies.set('publish_time',this.publish_time());\r\n\t\t\t\t\t/* this.$cookies.set('content',this.content); cookie存的东西少，不能用*/\r\n\t\t\t\t\twindow.localStorage.setItem(\"content\",this.content);\r\n\t\t\t\twindow.open(\"newsmodel.html\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tquery_modulars:function(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\taxios.get(\"https://www.122yici.xin/sjz/admin/forum/getmine\",\r\n\t\t\t\t{\r\n\t\t\t\t\theaders : {\r\n\t\t\t\t\t\"Authorization\" : \"Bearer \"+that.token\t\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t\t).then(function(response){\r\n\t\t\t\t\tthat.modulars = response.data;\r\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t}).catch(function(error)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\talert(\"获取当前用户的管理版块，未知错误，请联系管理员!\");\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcancel_btn:function(){\r\n\t\t\t\tif(confirm(\"取消将清空编辑器内容并无法恢复?\"))\r\n\t\t\t\t{\t\r\n\t\t\t\t\t\teditor.txt.html(\"\");\r\n\t\t\t\t}\t\r\n\t\t\t},\r\n\t\t\tpublish_btn:function(){\r\n\t\t\t\tvar that = this;/* \r\n\t\t\t\ttitle_rule = /^ +$/; */\r\n\t\t\t\tthis.content = editor.txt.html();\r\n\t\t\t\tif(!this.title)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请先输入标题!\");\r\n\t\t\t\t}\r\n\t\t\t\telse if(!this.content)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请先输入内容!\")\r\n\t\t\t\t}\r\n\t\t\t\telse if(!this.object)\r\n\t\t\t\t{\r\n\t\t\t\t\talert(\"请选择板块\")\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(confirm(\"确认发布?\"))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tconsole.log(this.content)\r\n\t\t\t\t\t\taxios.post(\"http://8.129.27.254:8000/publish\",window.Qs.stringify({\r\n\t\t\t\t\t\t\tforum_id : that.choose_modular_radio,\r\n\t\t\t\t\t\t\tnew_title : that.title,\r\n\t\t\t\t\t\t\tnew_content : that.content.toString(),\r\n\t\t\t\t\t\t\tcover:that.cover,\r\n\t\t\t\t\t\t\tobject:that.object\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t\t\t\"Authorization\" : \"Bearer \"+that.token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t).then(function(response){\r\n\t\t\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\t\t\tif(response.data==\"success\")\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\talert(\"发布新闻成功!\");\r\n\t\t\t\t\t\t        editor.txt.html(\"\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(function(error){\r\n\t\t\t\t\t\t\tconsole.log(\"发布新闻失败,请联系管理员!\");\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}